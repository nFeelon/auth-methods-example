# Демонстрация методов авторизации

Этот проект демонстрирует различные методы хранения данных авторизации в веб-приложениях. Реализованы три основных способа:
- LocalStorage
- Cookies
- PHP Sessions

## Структура проекта

```
auth.local/
├── api/
│   ├── cookie_auth.php      # API для работы с Cookie-авторизацией
│   ├── localStorage_auth.php # API для работы с LocalStorage
│   └── session_auth.php     # API для работы с PHP Sessions
├── database/
│   └── init.sql            # Схема базы данных
├── js/
│   ├── auth.js    # Основная логика авторизации
│   └── storage.js # Управление способами хранения
├── index.php      # Главная страница
└── style.css      # Стили приложения
```

## Методы авторизации

### 1. LocalStorage

**Преимущества:**
- Данные хранятся только на клиенте
- Больший объем хранения (5-10 МБ)
- Простой доступ через JavaScript
- Данные сохраняются после закрытия браузера

**Недостатки:**
- Уязвимость к XSS-атакам
- Нет автоматической очистки
- Доступно только через JavaScript

**Реализация:**
- Токен генерируется на сервере
- Хранится в localStorage браузера
- При каждом запросе токен отправляется в заголовке

### 2. Cookies

**Преимущества:**
- Автоматическая отправка с каждым запросом
- Можно установить флаг HttpOnly для защиты от XSS
- Можно установить срок жизни
- Работает без JavaScript

**Недостатки:**
- Ограниченный размер (4 КБ)
- Отправляется с каждым запросом (overhead)
- Уязвимость к CSRF-атакам

**Реализация:**
- Токен генерируется на сервере
- Сохраняется в куки через setcookie()
- Можно защитить флагом HttpOnly
- Автоматически отправляется с запросами

### 3. PHP Sessions

**Преимущества:**
- Данные хранятся на сервере
- Высокая безопасность
- Не зависит от настроек клиента
- Автоматическая очистка сессий

**Недостатки:**
- Нагрузка на сервер
- Проблемы с масштабированием
- Привязка к одному серверу

**Реализация:**
- Сессия создается через session_start()
- ID сессии хранится в куки PHPSESSID
- Данные хранятся в файлах на сервере
- Автоматическое удаление по timeout

## База данных

Проект использует MySQL для хранения:
- Учетных данных пользователей (таблица users)
- Активных токенов авторизации (таблица auth_tokens)

Схема базы данных находится в файле `database/init.sql`.

## Безопасность

В проекте реализованы базовые меры безопасности:
- Хеширование паролей
- Защита от SQL-инъекций через prepared statements
- Возможность установки HttpOnly для кук
- Очистка всех токенов при смене метода авторизации

## Установка и запуск

1. Создать базу данных MySQL:
   - Открыть PhpMyAdmin (http://localhost/phpmyadmin)
   - Импортировать файл `database/init.sql`
   - База создастся автоматически с именем auth_example
2. Разместить файлы в директории OpenServer
3. Открыть в браузере http://auth.local

## Тестирование

Для тестирования различных методов авторизации:
1. Зарегистрируйте нового пользователя
2. Попробуйте войти используя разные методы хранения
3. Проверьте работу после перезагрузки страницы
4. Проверьте корректность выхода и очистки данных

При смене метода авторизации происходит:
- Удаление токена из БД
- Очистка localStorage
- Удаление кук
- Сброс сессии

### Автор
- Филон Никита